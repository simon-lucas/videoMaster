package VideoMaster {		import flash.display.MovieClip;	import flash.events.MouseEvent;	import flash.events.Event;	import data.Global;		import com.greensock.loading.ImageLoader;	import com.greensock.loading.LoaderMax;	import com.greensock.events.LoaderEvent;			public class Menu extends MovieClip {		public var timeLine		//public var menuImages:Array = ["seaweed","Mud","sea grass","salt flat","man grove","open water","Coral"]		public var menuImages:Array = ["one","two","three","four"]		public const MENUCOUNT : uint = 4		public var menuQueue : LoaderMax		public function Menu() {			// constructor code		}				public function init() {			// constructor code						for (var i:int = 0; i < menuImages.length; i++)			{				if (this["menu"+(i+1)]!=null){					this["menu"+(i+1)].textbg.width=this["menu"+(i+1)].bg.width + 6					this["menu"+(i+1)].visible = true;					this["menu"+(i+1)].menuIndex = i;					this["menu"+(i+1)].addEventListener("onMenuPress", onMenuPress);					trace("MMMMENU! OMG!", this["menu"+(i+1)].scaleX)					this["MenuOption"+(i+1)].scaleX=this["MenuOption"+(i+1)].scaleY=this["menu"+(i+1)].scaleX * 2.5					this["MenuOption"+(i+1)].y=this["menu"+(i+1)].y - (100 * this["menu"+(i+1)].scaleX)				}							}			//menu1.addEventListener("onMenuPress", onTimeLinePress);			if (timeLine) timeLine.addEventListener("onMenuPress", onTimeLinePress);			//trace("add timeLine", timeLine)						loadImages()		}				public function onMenuPress(e:Event):void{			trace(e.currentTarget.menuIndex)			Global.currentVideoIndex = e.currentTarget.menuIndex				dispatchEvent(new Event("playVideoStory"))		}				public function onTimeLinePress(e:Event):void{			trace("BUTTON ", e.currentTarget.name)			//Global.currentVideoIndex = e.currentTarget.menuIndex				dispatchEvent(new Event("showTimeLine"))		}				public function loadImages():void{						menuQueue = new LoaderMax({name:"timeLineQueue", onProgress:progressHandler, onComplete:completeHandler2});			for (var i:int = 0; i < menuImages.length; i++)			{								var imageLoader = new ImageLoader(Global.version+"_"+"menu_images/"+menuImages[i]+".png", {name:menuImages[i] , container: this["menu"+(i+1)], width: this["menu"+(i+1)].bg.width, height: this["menu"+(i+1)].bg.height, vAlign:"center", estimatedBytes:2400,  alpha:1, scaleMode:"proportionalOutside", crop:true, centerRegistration:false})								menuQueue.append(imageLoader);										}			var imageLoader = new ImageLoader(Global.version+"_"+"menu_images/bg.jpg", {name:"bg.jpg" , vAlign:"center", container:this.bg, estimatedBytes:2400,  alpha:1, scaleMode:"proportionalInside", centerRegistration:false, onComplete:completeHandler1})						imageLoader.load()		}				public function completeHandler1(e:LoaderEvent):void{			trace("completeHandler1")			//overLaySprite.addChild(Global.timeLineQueue.getChildAt(100).content)			menuQueue.load()		}		public function completeHandler2(e:LoaderEvent):void{			trace("completeHandler2")			//overLaySprite.addChild(Global.timeLineQueue.getChildAt(100).content)			//trace("X", Global.timeLineQueue.getChildAt(100).content)			//animTimer.start()		}		public function progressHandler(e:LoaderEvent):void{			//trace("yikes")		}			}	}