package VideoMaster {		import flash.display.MovieClip;	import data.Global;	import com.greensock.loading.ImageLoader;	import com.greensock.loading.LoaderMax;	import com.greensock.events.LoaderEvent;	import flash.display.Sprite;	import flash.utils.Timer;	import flash.events.TimerEvent;	import flash.events.MouseEvent;	import flash.events.Event;	import VideoMaster.ITimeLineControl;			public class TimeLine extends MovieClip {				private var bgImagename = "Map_vector_LAND.jpg"		private var overlay:String = "Map_vector_water 3840_"		private var imageCount:uint = 375;		private var overLaySprite:Sprite;		private var mapSprite:GulfMapAnimation;						private var timeLineControl: ITimeLineControl				private var backButton : BackToMenuSprite						public function TimeLine() {					}				public function init():void{			mapSprite = new GulfMapAnimation()			mapSprite.x=stage.stageWidth/2			mapSprite.y=stage.stageHeight/2						addChildAt(mapSprite,0)						if ( Global.lang=="A"){				timeLineControl = new TimeLineControlA()			} else {				timeLineControl = new TimeLineControlE()			}									timeLineControl.setLoc(140, 800)			//(timeLineControl as MovieClip).x = 100			//(timeLineControl as MovieClip).y = 800					addChild(timeLineControl as MovieClip)			timeLineControl.init(mapSprite)						//this.setChildIndex(mapText, numChildren-1)			backButton = new BackToMenuSprite()				addChild(backButton)			backButton.y=914			backButton.x=1110//stage.stageWidth - backButton.width			backButton.addEventListener(MouseEvent.MOUSE_DOWN, closeTimeLine)		}								public function deInit():void{						timeLineControl.deInit()			removeChild(mapSprite)			removeChild(timeLineControl as MovieClip)						backButton.removeEventListener(MouseEvent.MOUSE_DOWN, closeTimeLine)			removeChild(backButton)		}				public function closeTimeLine(e:MouseEvent):void{			dispatchEvent(new Event("closeTimeLine"))				}								/*LEGACY TIMELINE IMAGE LOADER*/		public function loadImages():void{			var imageLoader = new ImageLoader("timeline_images/Map_vector_LAND.jpg", {name:"Map_vector_LAND.jpg" , vAlign:"center", container:mapSprite, estimatedBytes:2400,  alpha:1, scaleMode:"proportionalInside", centerRegistration:true, onComplete:completeHandler1})						imageLoader.load()			Global.timeLineQueue = new LoaderMax({name:"timeLineQueue", onProgress:progressHandler, onComplete:completeHandler2});			for (var i:int = 0; i < imageCount; i++)			{				//var h= new HorsePicture();				//trace(i, Global.horseCollection[i].image)				//h.init(i, Global.horseCollection[i].image+".jpg")				//h.init(i, Global.horseCollection[i])				//h.image=Global.horseCollection[i].image				var num = String(i)				while(num.length < 5){					num="0"+num;				}				//container:h.thumbHolder,				var overlayName = overlay + num;				var imageLoader = new ImageLoader("timeline_images/"+overlayName+".png", {name:overlayName , vAlign:"center", estimatedBytes:2400,  alpha:1, scaleMode:"proportionalInside", centerRegistration:true})				//h.thumbLoader = imageLoader				Global.timeLineQueue.append(imageLoader);				//horsePics.push(h)						}					}				public function completeHandler1(e:LoaderEvent):void{			trace("completeHandler1",overLaySprite)			overLaySprite.addChild(Global.timeLineQueue.getChildAt(100).content)			Global.timeLineQueue.load()		}				public function completeHandler2(e:LoaderEvent):void{			trace("completeHandler2")			overLaySprite.addChild(Global.timeLineQueue.getChildAt(100).content)			trace("X", Global.timeLineQueue.getChildAt(100).content)						//animTimer.start()		}		public function progressHandler(e:LoaderEvent):void{			//trace("yikes")		}			}	}