package com.studioshitless.ImageGridEngine{import flash.display.Sprite;import com.studioshitless.ImageGridEngine.IImageGrid;import com.studioshitless.ImageGridEngine.ImageGridBase;import com.studioshitless.views.MaskedImage;import flash.utils.setTimeout;import com.studioshitless.events.MaskedImageEvent;public class ImageCluster extends ImageGridBase implements IImageGrid{	private var centreX:Number;	private var centreY:Number;	private var topRow:Array;	private var bottomRow:Array;	private var topHSpace:Number;	private var bottomHSpace:Number;	private var maxImages:uint	public function ImageCluster(w:uint, h:uint)	{		super(w,h);		centreX=w/2;		centreY=h/2;	}		public override function init(imageList:Array, startSize:uint=0):void{		super.init(imageList);		//trace(imageList);		topRow=new Array();		bottomRow=new Array();		maxImages= imageList.length;//uint(Math.random()*imageList.length)		for (var i:uint = 0; i <= uint(maxImages/2); i++){			topRow.push(imageList[i])		}		for ( i = uint(maxImages/2)+1; i < maxImages; i++){			bottomRow.push(imageList[i])		}		//trace(topRow)		//trace(bottomRow)		topHSpace=w/topRow.length;		bottomHSpace=w/bottomRow.length;		counter=0;		addImage();	}		public override function addImage():void{		if (counter < maxImages){			var im:MaskedImage= imageList[counter];			if (counter< uint(maxImages/2)){				addImageAtTop(im)			}else{				addImageAtBottom(im)			}			counter++;			setTimeout(addImage,250)		}	}		private function addImageAtTop(im:MaskedImage):void{			var offset:Number=0;		//trace("uint(imageList.length/2)",uint(imageList.length/2))		if (topRow.length%2==1){			offset=topHSpace/2		}			im.scaleToWidth(topHSpace,h/2);		im.x=counter*topHSpace+offset;		im.y=centreY-im.height;		trace("im",im.height)		addChild(im)		im.addEventListener(MaskedImageEvent.ZOOM,onImageZoomed,false);		//trace("addImageAtTop",im.x,im.scaleX)	}		private function addImageAtBottom(im:MaskedImage):void{		var offset:Number=0;		//trace("uint(imageList.length/2)",uint(imageList.length/2))		if (bottomRow.length%2==1){			offset=topHSpace/2		}		im.scaleToWidth(topHSpace,h/2);		im.x=(counter-uint(imageList.length/2))*topHSpace+offset;		im.y=centreY;		addChild(im)		im.addEventListener(MaskedImageEvent.ZOOM,onImageZoomed,false);		//trace("addImageAtTop",im.x,im.scaleX)	}}}