package com.studioshitless.views	{	import flash.display.Sprite;	import flash.utils.Timer;	import flash.events.TimerEvent;	import flash.events.Event;	import com.spiral.events.AttractorEvent;	import com.spiral.maryrose.charactercase.model.Config;	import flash.events.MouseEvent;	import flash.display.MovieClip;	/*e.g. subclass Attractor in FLash*/	public class Attractor extends MovieClip	{		public var timer:Timer;		public var titletext:String;		public var counter:uint;				public var debug:Boolean=true;				public function Attractor()		{			super()			timer = new Timer(1000,Config.timeoutlength);			timer.addEventListener(TimerEvent.TIMER_COMPLETE,showAttractor);			timer.addEventListener(TimerEvent.TIMER,timeOutProgress);			visible=false;		}				public function showAttractor(e:TimerEvent=null):void{			if (debug) trace("showAttractor");			stopTimer();						visible=true;			addEventListener(MouseEvent.CLICK,hideAttractor);			dispatchEvent(new AttractorEvent(AttractorEvent.TIMEOUT));					}				public function timeOutProgress(e:TimerEvent):void{			var timeoutwarning =  Math.min( Config.timeoutlength*.25, 10)			 timeoutwarning= Math.floor(timeoutwarning);			//if (debug) trace("timeOutProgress",timer.currentCount,Config.timeoutlength - timeoutwarning)			if (timer.currentCount == Config.timeoutlength - timeoutwarning){				dispatchEvent(new AttractorEvent(AttractorEvent.TIMEOUT_WARNING));			}		}		public function hideAttractor(e:MouseEvent):void{			removeEventListener(MouseEvent.CLICK,hideAttractor);			timer.reset();			timer.start();			visible=false;			dispatchEvent(new AttractorEvent(AttractorEvent.ATTRACTOR_CLICKED));		}		public function reset():void{			//trace("resetTimer");			timer.reset();			timer.start();		}		public function stopTimer():void{			trace("stopTimer");			timer.reset();			timer.stop();		}		public function startTimer():void{			trace("startTimer");			reset();		}				/*	public function init(titletext:String)			{				this.titletext=titletext;				timer=new Timer(100,0);				timer.addEventListener(TimerEvent.TIMER,doAnimate)			}			public function doAnimate(t:TimerEvent)			{				if (counter< titletext.length-1){					counter++				}else{					counter=0;				}				titleField.appendText(titletext.charAt(counter))			}			public function startText()			{				counter=0;				timer.start();			}			public function stopText()			{				titleField.text="";				timer.stop();			}*/	}	}